(function(e){"use strict";var t=360,n={seconds:10,color:"rgba(255, 255, 255, 0.8)",height:null,width:null,elementID:null},r=40,i="pie_timer",s="pie_timer",o=3*Math.PI/2,u=Math.PI/180,a=function(e,n,r){n.width===null&&(n.width=e.width());n.height===null&&(n.height=e.height());this.settings=n;this.jquery_object=e;this.interval_id=null;this.current_value=t;this.callback=r;this.is_paused=!0;this.jquery_object.html('<canvas class="'+i+'" width="'+n.width+'" height="'+n.height+'"></canvas>');this.canvas=this.jquery_object.children("."+i)[0];this.pieSeconds=this.settings.seconds};a.prototype={start:function(){if(this.is_paused){this.current_value<=0&&(this.current_value=t);this.interval_id=setInterval(e.proxy(this.run_timer,this),r);this.is_paused=!1}},pause:function(){if(!this.is_paused){clearInterval(this.interval_id);this.is_paused=!0}},run_timer:function(){if(this.canvas.getContext){this.current_value-=t/this.settings.seconds/24;if(this.settings.elementID){var n=Math.ceil(this.current_value/t*this.settings.seconds);if(this.pieSeconds!==n){this.pieSeconds=n;e("#"+this.settings.elementID).html(this.pieSeconds)}}if(this.current_value<=0){clearInterval(this.interval_id);this.canvas.width=this.settings.width;e.isFunction(this.callback)&&this.callback.call();this.is_paused=!0}else{this.canvas.width=this.settings.width;var r=this.canvas.getContext("2d"),i=[this.canvas.width,this.canvas.height],s=Math.min(i[0],i[1])/2,a=[i[0]/2,i[1]/2];r.beginPath();r.moveTo(a[0],a[1]);var f=o;r.arc(a[0],a[1],s,f-this.current_value*u,f,!1);r.closePath();r.fillStyle=this.settings.color;r.fill()}}}};var f=function(t,r){var i=e.extend({},n,t);return this.each(function(){var t=e(this),n=new a(t,i,r);t.data(s,n)})},l=function(t){t in a.prototype||e.error("Method "+t+" does not exist on jQuery.pietimer");var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e(this),i=r.data(s);if(!i)return!0;i[t].apply(i,n)})};e.fn.pietimer=function(e){return typeof e=="object"||!e?f.apply(this,arguments):l.apply(this,arguments)}})(jQuery);